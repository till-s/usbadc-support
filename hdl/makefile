# Makefile automatically generated by ghdl
# Version: GHDL 1.0.0 (1.0.0.r0.g2fb2384d) [Dunoon edition] - GCC back-end code generator
# Command used to generate this makefile:
# ghdl --gen-makefile CommandWrapperTb

GHDL=ghdl
GHDLFLAGS=-P/opt/ghdl/v1.0.0-gcc/ise-14.7/

HEREDIR:=$(dir $(lastword $(MAKEFILE_LIST)))

# Default target
all: commandwrappertb commandwrappersim cicfiltertb

OBJS+=CommandMuxPkg.o ByteStuffer.o SFifo.o ByteDeStuffer.o
OBJS+=CommandMux.o SynchronizerBit.o BitBangIF.o CommandBitBang.o
OBJS+=MaxAdc.o CommandWrapper.o ILAWrapperPkg.o AcqCtlPkg.o
OBJS+=CicFilter.o CommandAcqParm.o BasicPkg.o

# Elaboration target
commandwrappertb: /opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/std_logic_1164.o /opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/std_logic_1164-body.o /opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/numeric_std.o /opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/numeric_std-body.o /opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/math_real.o /opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/math_real-body.o CommandWrapperTb.o $(OBJS)
	$(GHDL) -e $(GHDLFLAGS) $@

commandwrappersim: $(OBJS) SimPty.o SimPtyIO.o CommandWrapperSim.o $(OBJS)
	$(GHDL) -e $(GHDLFLAGS) -Wl,SimPtyIO.o  $@

cicfiltertb: $(OBJS) CicFilterTb.o
	$(GHDL) -e $(GHDLFLAGS)  $@

# Run target
run: commandwrappertb
	$(GHDL) -r commandwrappertb $(GHDLRUNFLAGS)

# Targets to analyze files
/opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/std_logic_1164.o: /opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/../../src/ieee/v93/std_logic_1164.vhdl
	@echo "This file was not locally built ($<)"
	exit 1
/opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/std_logic_1164-body.o: /opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/../../src/ieee/v93/std_logic_1164-body.vhdl
	@echo "This file was not locally built ($<)"
	exit 1
/opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/numeric_std.o: /opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/../../src/ieee/v93/numeric_std.vhdl
	@echo "This file was not locally built ($<)"
	exit 1
/opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/numeric_std-body.o: /opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/../../src/ieee/v93/numeric_std-body.vhdl
	@echo "This file was not locally built ($<)"
	exit 1
/opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/math_real.o: /opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/../../src/ieee/math_real.vhdl
	@echo "This file was not locally built ($<)"
	exit 1
/opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/math_real-body.o: /opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/../../src/ieee/math_real-body.vhdl
	@echo "This file was not locally built ($<)"
	exit 1
CommandMuxPkg.o: CommandMuxPkg.vhd
	$(GHDL) -a $(GHDLFLAGS) $<
ByteStuffer.o: ByteStuffer.vhd
	$(GHDL) -a $(GHDLFLAGS) $<
SFifo.o: SFifo.vhd
	$(GHDL) -a $(GHDLFLAGS) $<
ByteDeStuffer.o: ByteDeStuffer.vhd
	$(GHDL) -a $(GHDLFLAGS) $<
CommandMux.o: CommandMux.vhd ILAWrapperPkg.o
	$(GHDL) -a $(GHDLFLAGS) $<
SynchronizerBit.o: SynchronizerBit.vhd
	$(GHDL) -a $(GHDLFLAGS) $<
BitBangIF.o: BitBangIF.vhd
	$(GHDL) -a $(GHDLFLAGS) $<
CommandBitBang.o: CommandBitBang.vhd BitBangIF.o
	$(GHDL) -a $(GHDLFLAGS) $<
SimPty.o: SimPty.vhd
	$(GHDL) -a $(GHDLFLAGS) $<
MaxAdc.o: MaxAdc.vhd
	$(GHDL) -a $(GHDLFLAGS) $<
CommandWrapper.o: CommandWrapper.vhd GitVersionPkg.o
	$(GHDL) -a $(GHDLFLAGS) $<
CommandWrapperTb.o: CommandWrapperTb.vhd CommandMuxPkg.o
	$(GHDL) -a $(GHDLFLAGS) $<
CommandWrapperSim.o: CommandWrapperSim.vhd $(OBJS) SimPty.o SimPtyIO.o
	$(GHDL) -a $(GHDLFLAGS) $<

%.o: %.vhd
	$(GHDL) -a $(GHDLFLAGS) $<

SimPtyIO.o: SimPtyIO.cc
	g++ -Wall -c -O2 -o $@ $<

# Files dependences
/opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/std_logic_1164.o: 
/opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/std_logic_1164-body.o:  /opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/std_logic_1164.o
/opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/numeric_std.o:  /opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/std_logic_1164.o
/opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/numeric_std-body.o:  /opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/numeric_std.o
/opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/math_real.o: 
/opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/math_real-body.o:  /opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/math_real.o
CommandMuxPkg.o:  /opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/std_logic_1164.o /opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/numeric_std.o /opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/math_real.o /opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/math_real-body.o
ByteStuffer.o:  /opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/std_logic_1164.o
SFifo.o:  /opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/std_logic_1164.o /opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/numeric_std.o
ByteDeStuffer.o:  /opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/std_logic_1164.o
CommandMux.o:  /opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/std_logic_1164.o /opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/numeric_std.o CommandMuxPkg.o
SynchronizerBit.o:  /opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/std_logic_1164.o
BitBangIF.o:  /opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/std_logic_1164.o /opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/numeric_std.o /opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/math_real.o SynchronizerBit.o BasicPkg.o
CommandBitBang.o:  /opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/std_logic_1164.o /opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/numeric_std.o /opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/math_real.o CommandMuxPkg.o BitBangIF.o
MaxAdc.o:  /opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/std_logic_1164.o /opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/numeric_std.o CommandMuxPkg.o ILAWrapper.o AcqCtlPkg.o BasicPkg.o
CommandWrapper.o:  /opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/std_logic_1164.o /opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/numeric_std.o CommandMuxPkg.o ByteDeStuffer.o ByteStuffer.o CommandMux.o CommandBitBang.o MaxAdc.o GitVersionPkg.o CommandAcqParm.o
CommandWrapperTb.o:  /opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/std_logic_1164.o /opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/std_logic_1164-body.o /opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/numeric_std.o /opt/ghdl/v1.0.0-gcc/lib/ghdl/ieee/v93/numeric_std-body.o CommandMuxPkg.o ByteStuffer.o SFifo.o ByteDeStuffer.o CommandWrapper.o
CommandAcqParm.o: AcqCtlPkg.o CommandMuxPkg.o

CicFilterTb.o: CicFilter.o

GITVERSION:=$(shell git rev-parse --short=8 HEAD)

GitVersionPkg.vhd: $(HEREDIR)/GitVersionPkg.vhd.in .FORCE
	echo $(GITVERSION)
	@if [ ! -f $@ -o $@ -ot $< ] || ! grep -q $(GITVERSION) $@ ; then echo DOIT; sed -e 's/#SUBST#/$(GITVERSION)/' < $< > $@; else echo SKIP; fi

git: GitVersionPkg.vhd

.PHONY: .FORCE

clean:
	$(RM) $(OBJS) SimPty.o SimPtyIO.o CommandWrapperSim.o CommandWrapperTb.o commandwrappersim commandwrappertb
	$(RM) dump.ghw work-obj*.cf e~*.o GitVersionPkg.vhd cicfiltertb CicFilterTb.o GitVersionPkg.o
